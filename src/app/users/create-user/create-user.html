<div class="create-user-modal">
  <div class="modal-content">
    <div class="modal-header">
      <h2>Criar Novo Usuário</h2>
      <button type="button" class="close-btn" (click)="onCancel()">×</button>
    </div>

    <form (ngSubmit)="onSubmit()" class="create-user-form">
      <div class="form-group">
        <label for="name">Nome *</label>
        <input
          type="text"
          id="name"
          [(ngModel)]="name"
          name="name"
          required
          minlength="3"
          [class.error]="nameError"
        />
        @if (nameError) {
          <span class="error-message">{{ nameError }}</span>
        }
      </div>

      <div class="form-group">
        <label for="cpf">CPF *</label>
        <input
          type="text"
          id="cpf"
          [(ngModel)]="cpf"
          name="cpf"
          (input)="onCPFInput($event)"
          (blur)="onCPFBlur()"
          placeholder="000.000.000-00"
          required
          [class.error]="cpfError"
        />
        @if (cpfError) {
          <span class="error-message">{{ cpfError }}</span>
        }
      </div>

      <div class="form-group">
        <label for="accountProvider">Corretora *</label>
        <input
          type="text"
          id="accountProvider"
          [(ngModel)]="accountProvider"
          name="accountProvider"
          required
          [class.error]="accountProviderError"
        />
        @if (accountProviderError) {
          <span class="error-message">{{ accountProviderError }}</span>
        }
      </div>

      <div class="form-group">
        <label for="accountNumber">Número da Conta *</label>
        <input
          type="text"
          id="accountNumber"
          [(ngModel)]="accountNumber"
          name="accountNumber"
          (input)="accountNumberError = ''; errorMessage = ''"
          required
          [class.error]="accountNumberError"
        />
        @if (accountNumberError) {
          <span class="error-message">{{ accountNumberError }}</span>
        }
      </div>

      <div class="form-group">
        <label for="picture">Foto</label>
        <input
          type="file"
          id="picture"
          name="picture"
          accept="image/jpeg,image/png,image/jpg"
          (change)="onPictureSelected($event)"
          [class.error]="pictureError"
        />
        @if (pictureError) {
          <span class="error-message">{{ pictureError }}</span>
        }
        @if (pictureFile) {
          <app-picture-preview
            [file]="pictureFile"
            (remove)="onPictureRemove()"
          />
        }
      </div>

      @if (errorMessage) {
        <div class="form-error">
          {{ errorMessage }}
        </div>
      }

      <div class="form-actions">
        <button type="button" class="btn btn-cancel" (click)="onCancel()" [disabled]="isSubmitting">
          Cancelar
        </button>
        <button type="submit" class="btn btn-primary" [disabled]="isSubmitting">
          @if (isSubmitting) {
            Criando...
          } @else {
            Criar Usuário
          }
        </button>
      </div>
    </form>
  </div>
</div>

