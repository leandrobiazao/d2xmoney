<div class="upload-container">
  <h3>Upload de Nota de Corretagem (PDF)</h3>
  
  <div class="file-input-container">
    <input 
      type="file" 
      id="pdf-file" 
      accept=".pdf" 
      (change)="onFileSelected($event)"
      [disabled]="isProcessing"
    />
    <label for="pdf-file" class="file-label">
      {{ selectedFile ? selectedFile.name : 'Selecionar arquivo PDF' }}
    </label>
  </div>

  <button 
    class="upload-button"
    (click)="onUpload()"
    [disabled]="!selectedFile || isProcessing || showTickerDialog"
  >
    {{ isProcessing || showTickerDialog ? 'Processando...' : 'Upload e Processar PDF' }}
  </button>

  @if (errorMessage) {
    <div class="message error" (click)="clearMessages()">
      <strong>Erro:</strong> {{ errorMessage }}
    </div>
  }

  @if (successMessage) {
    <div class="message success" (click)="clearMessages()">
      {{ successMessage }}
    </div>
  }

  <div class="mappings-info">
    <p class="info-text">
      <strong>üí° Dica:</strong> Os tickers s√£o salvos automaticamente no arquivo do servidor. 
    </p>
    <div class="server-status" [class.online]="serverStatus === 'online'" [class.offline]="serverStatus === 'offline'" [class.checking]="serverStatus === 'checking'">
      <strong>Status do Servidor:</strong>
      @if (serverStatus === 'checking') {
        <span>üîÑ Verificando...</span>
      } @else if (serverStatus === 'online') {
        <span>‚úÖ Online - Backend Django est√° rodando</span>
      } @else {
        <span>‚ùå Offline - Certifique-se de que o Django est√° rodando na porta 8000</span>
      }
    </div>
  </div>
</div>

@if (showTickerDialog) {
  <app-ticker-dialog
    [nome]="currentNome"
    [operationData]="currentOperationData"
    (confirm)="onTickerConfirm($event)"
    (cancel)="onTickerCancel()"
  />
}

