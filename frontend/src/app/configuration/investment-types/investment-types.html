<div class="investment-types-container">
  <div class="header-actions">
    <h3>Tipos de Investimento</h3>
    <button class="btn btn-primary" (click)="onCreate()">
      <svg width="16" height="16" viewBox="0 0 16 16" fill="none" style="margin-right: 6px;">
        <path d="M8 3V13M3 8H13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
      </svg>
      Novo Tipo
    </button>
  </div>

  @if (isLoading) {
    <div class="loading">Carregando...</div>
  } @else if (errorMessage) {
    <div class="error">
      <p>{{ errorMessage }}</p>
      <button class="retry-btn" (click)="loadInvestmentTypes()">Tentar Novamente</button>
    </div>
  } @else if (investmentTypes.length === 0) {
    <div class="empty-state">
      <p>Nenhum tipo de investimento cadastrado.</p>
    </div>
  } @else {
    <div class="types-table-container">
      <table class="types-table">
        <thead>
          <tr>
            <th>Ordem</th>
            <th>Nome</th>
            <th>Código</th>
            <th>Status</th>
            <th>Ações</th>
          </tr>
        </thead>
        <tbody>
          @for (type of investmentTypes; track type.id) {
            <tr>
              <td>{{ type.display_order }}</td>
              <td class="name-cell"><strong>{{ type.name }}</strong></td>
              <td>{{ type.code }}</td>
              <td>
                <span class="badge" [class.active]="type.is_active">
                  {{ type.is_active ? 'Ativo' : 'Inativo' }}
                </span>
              </td>
              <td>
                <div class="type-actions">
                  <button class="btn-icon" (click)="onEdit(type)" title="Editar">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                      <path d="M11.333 2a2.828 2.828 0 1 1 4 4L6 15.333H2v-4L11.333 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                  <button class="btn-icon btn-danger" (click)="onDelete(type)" title="Excluir">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                      <path d="M2 4h12M6 4V2a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1v2M6 7.333v4M10 7.333v4M3.333 4l.667 9.333a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1L12.667 4" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                  </button>
                </div>
              </td>
            </tr>
          }
        </tbody>
      </table>
    </div>
  }
</div>

@if (showCreateModal) {
  <div class="modal-overlay" (click)="onCloseModal()">
    <div class="modal-content" (click)="$event.stopPropagation()">
      <div class="modal-header">
        <h3>{{ editingType ? 'Editar' : 'Criar' }} Tipo de Investimento</h3>
        <button class="btn-close" (click)="onCloseModal()">×</button>
      </div>
      <div class="modal-body">
        <div class="form-group">
          <label>Nome</label>
          <input type="text" [(ngModel)]="formData.name" placeholder="Ex: Renda Fixa" />
        </div>
        <div class="form-group">
          <label>Código</label>
          <input type="text" [(ngModel)]="formData.code" placeholder="Ex: RENDA_FIXA" />
        </div>
        <div class="form-group">
          <label>Ordem de Exibição</label>
          <input type="number" [(ngModel)]="formData.display_order" />
        </div>
        <div class="form-group">
          <label>
            <input type="checkbox" [(ngModel)]="formData.is_active" />
            Ativo
          </label>
        </div>
      </div>
      <div class="modal-footer">
        <button class="btn btn-secondary" (click)="onCloseModal()">Cancelar</button>
        <button class="btn btn-primary" (click)="onSave()">Salvar</button>
      </div>
    </div>
  </div>
}


