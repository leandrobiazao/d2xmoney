<div class="dialog-overlay" (click)="onOverlayClick($event)">
  <div class="dialog-container" (click)="$event.stopPropagation()" (mousedown)="$event.stopPropagation()">
    <h2>Novo Ticker Encontrado</h2>
    <p>Foi encontrado um ativo com o nome completo:</p>
    <p class="nome-ativo"><strong>{{ nome }}</strong></p>
    <p>Qual é o ticker correto na B3?</p>
    
    @if (operationData) {
      <div class="operation-context">
        <p><strong>Tipo:</strong> {{ operationData.tipoOperacao === 'C' ? 'Compra' : 'Venda' }}</p>
        <p><strong>Mercado:</strong> {{ operationData.tipoMercado }}</p>
        <p><strong>Quantidade:</strong> {{ operationData.quantidade }}</p>
        <p><strong>Preço:</strong> R$ {{ operationData.preco?.toFixed(2) }}</p>
      </div>
    }
    
    <form (ngSubmit)="onSubmit($event)" (submit)="$event.preventDefault()" (click)="$event.stopPropagation()" (mousedown)="$event.stopPropagation()">
      <div class="form-group">
        <label for="ticker">Ticker (ex: PETR4, VALE3):</label>
        <input
          type="text"
          id="ticker"
          [(ngModel)]="ticker"
          name="ticker"
          placeholder="Ex: PETR4"
          required
          maxlength="10"
          class="ticker-input"
          (click)="$event.stopPropagation()"
          (mousedown)="$event.stopPropagation()"
          (focus)="$event.stopPropagation()"
          (keyup.enter)="onSubmit($event)"
          (keyup.escape)="onCancel()"
        />
      </div>
      <div class="dialog-actions">
        <button type="button" (click)="onCancel()" class="btn-cancel">Cancelar</button>
        <button type="button" (click)="onSubmit($event)" [disabled]="!ticker || ticker.trim().length === 0" class="btn-confirm">
          Confirmar
        </button>
      </div>
    </form>
  </div>
</div>

